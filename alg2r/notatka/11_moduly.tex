\section{Moduły}

\setcounter{section}{10}
\setcounter{theorem}{2}
\subsection{Moduły wprowadzenie}

\emph{Przestrzenie liniowe nad pierścieniami}

\begin{definition}
    Niech $R$ będzie pierścieniem z $1$, niekoniecznie przemienny. $(M,+,r)_r\in R$ jest modułem nad $R$, gdy spełnia aksjomaty przestrzeni liniowej nad $R$.

    Moduł może być:
    \begin{itemize}
        \item[\PHtunny] lewostronny, wtedy $M\ni x\mapsto rx$ dla każdego $r,x$ jest w $M$
        \item[\PHtunny] prawostronny (analogicznie, $xr\in M$).
    \end{itemize}
\end{definition}

Łączność mnożenia w modułach:

\begin{tabular}{ p{5cm} p{5cm} p{5cm} }
lewostronna & prawostronna & mieszana \\

$r_1(r_2m)=(r_1r_2)m$

&

$(mr_1)r_2=m(r_1r_2)$

&

jeśli jesteśmy w lewostronnym module:

$(mr_2)r_1=m(r_2r_1)$

i nie to samo co przy prawostronnym
\end{tabular}

\textbf{Przykłady:}

\begin{enumerate}
    \item $R=K$ to ciała, $K$-moduł to przestrzeń liniowa nad $K$
    \item $G$ jest grupą abelową, wtedy $G$ jest $\Z$-modułem
    \item $G$ jest grupą abelową, wtedy $End(G)$ są pierścieniem z jednością ($id_G$) i działaniami zdefiniowanymi dla $f, g\in End(G)$:
      $$(f+g)(x)=f(x)+g(x)$$
      $$(f\cdot g)(x)=f(g(x)).$$
      Grupa $G$ może być traktowana jako moduł nad $End(G)$ z działaniem zadanym przez $f\cdot x=f(x)$ dla $f\in End(G)$ i $x\in G$.
    \item Załóżmy, że $j:R\to End(G)$ jest homomorfizmem pierścieni z $1$. Wtedy $j$ wyznacza na $G$ strukturę $R$-modułu poprzez działanie: $r\cdot x=j(r)\cdot x$ dla $r\in R$ i $x\in G$.
      %
      %Z drugiej strony, gdy $(G, +, r)_{r\in R}$ jest $R$-modułem, to dla $r\in R$ mamy $j(r):G\to G$, czyli $j(r)\in End(G)$. Możemy więc zdefiniować $j(r)(g):=r\cdot g$. Możemy więc zamienić $R$-moduł $(G, +, R)$ na $End(G)$
    \item Gdy $R_1\subseteq R$ jest podpierścieniem z $1$, to $R$ jest modułem nad $R_1$.
    \item Gdy $j:R_1\to R$ jest homomorfizmem pierścieni z jednością i $M=(M,+,r)_{r\in R}$ jest $R$-modułem, to $M$ jest $R_1$-modułem z dzialaniem indukowanym przez $j$. To znaczy, dla $r_1\in R_1$ oraz $x\in M$ mamy $r_1\cdot x:=j(r_1)\cdot x$.
    \item $R$ jest pierścieniem z jednością i $I\subseteq R$ jest ideałem lewostronnym. Wtedy $I$ jest $R$-modułem.
\end{enumerate}

\begin{definition}
  Załóżmy, że $M$ jest $R$-modułem oraz $N\subseteq M$. Wtedy $N$ jest $R$-podmodułem $M$, gdy $N$ jest modułem względem działam z $M$, to znaczy:

  \begin{itemize}
    \item[\PHtunny] $(N, +)\leq (M, +)$
    \item[\PHtunny] $N$ jest zamknięty względem mnożenia przez skalary $r\in R$ w $M$.
  \end{itemize}
\end{definition}

\begin{remark}
    Niech $M$ będzie $R$-modułem, wtedy
    \begin{enumerate}
    \item $0\cdot m=0\in M$
    \item $r\cdot 0=0$
    \item $(-1)m=-m$
    \end{enumerate}
\end{remark}

\begin{proof}$ $\newline
  \begin{enumerate}
    \item $0\cdot m=(0+0)\cdot m=0m+0m\implies 0m=0$
    \item $r\cdot 0=r(0+0)=r0+r0\implies r0=0$
    \item $(-1)m+1m=(-1+1)m=0m=0\implies (-1)m=-m$
  \end{enumerate}
\end{proof}

\begin{remark}
Przekrój dowolnej niepustej rodziny podmodułów $M$ jest podmodułem $M$.
\end{remark}

\setcounter{theorem}{5}

\textbf{Przykład:}

$\{0\}\subseteq M$ jest podmodułem zerowym.

\begin{conclusion}
    Niech $A\subseteq M$. Wtedy istnieje najmniejszy podmoduł (ze względu na zawieranie) $N\subseteq M$ taki, że $A\subseteq M$. Jest to \acc[b]{podmoduł generowany przez $A$}
    $$N=\{\sum r_ia_i\;:\;r_i\in R,\;a_i\in A\}\cup\{0\}$$
\end{conclusion}

\begin{enumerate}
    \item Jeśli $N_1,N_2\subseteq M$ są podmodułami, to $N_1+N_2$ też jest podmodułem. To samo, jeśli weźmiemy $n$ takich podmodułów.
    \item Produkt $R$-modułów $M,N$, czyli $M\times N$, też jest $R$-modułem
    \item $M=N_1\oplus...\oplus N_k$ jest modułem dla $N_1,...,N_k$ podmodułów $M$. Dodatkowo, dla każdego $m\in M$ istnieją jedyne $n_1,...,n_k$ takie, że $m=n_1+...+n_k$.
\end{enumerate}

\important{Homomorfizm modułów} $h:M\to N$ działa tak samo jak zwykle. Nazwy izo-, endo-, auto-, mono- nadal są applicable.

Niech $h:M\to N$ będzie homomorfizmem $R$-modułów. Dla $N'\subseteq N$ podmodułu $h^{-1}[N']$ jest podmodułem $M$. Dla $M'\subseteq M$ podmodułem jest $h[M']\subseteq N$.

O odwzorowaniu $F:M_1\times...\times M_n\to M$ mówimy, że jest $n$-liniowym odwzorowaniem $R$-modułów, gdy jest liniowe na każdej współrzędnej.

Dla $M'\subseteq M$ podmodułu definiujemy \acc[b]{moduł ilorazowy} jako $M/M'=\{m+M'\;:\;m\in M\}$. Warstwy działają tutaj tak samo jak w grupach czy pierścieniach ilorazowych.

\begin{theorem}[zasadnicze twierdzenie o homommoorfizmie $R$-modułów] Zasadnicze twierdzenie o homomorfizmie $R$-modułów. Niech $M,N$ będą modułami. Wtedy dla każdego $f:M\to N$ istnieje dokładnie jeden $\overline f$ taki, że

\begin{center}
\begin{tikzcd}
    M\arrow[r,"\forall\;f"] \arrow[d, "iloraz" left]& N\\
    M/ker(F)\arrow[ur, dashed, "\exists!\;\overline f" right]
\end{tikzcd}
\end{center}

\end{theorem}

\begin{theorem}[o faktoryzacji] Niech $f:M\to N$ i $g:M\to U$ będą homomorfizmami $R$-modułów. Wtedy $h:U\to N$ istnieje $\iff$ $ker(g)\subseteq ker(g)$.

\begin{center}\begin{tikzcd}
M\arrow[r, "f"]\arrow[d, "g"] & N\\
U\arrow[ur, dashed, "\exists\;h\iff ker(f)\supseteq ker(g)" right]
\end{tikzcd}
\end{center}

\end{theorem}

Zbiór wszystkich homomorfizmów między modułem $M$ i $N$ oznaczamy 
$${\color{blue}Hom_R(M, N)}=\{h:M\to N\;:\;h\text{ jest homomorfizmem }R\text{-modułów}\}.$$ 
Tak jak w przypadku homomorfizmów między grupami czy pierścieniami, mamy $h:M\to N$ jest różnowartościowe $\iff$ $ker(h)=\{0\}$.

Dla $R$ będącego przemiennym pierścieniem $Hom_R(M, N)$ można traktować jako $R$-moduł definiując działania dla $m\in M$ przez:
$$\begin{array}{l ll l}(h_1+h_2)(m)=h_1(m)+h_2(m) & & & h_1,h_2\in Hom_R(M, N)\\
(rh)(m)=r\cdot h(m) & & & r\in R\end{array}$$

\subsection{Cel: zrozumieć moduły}

\begin{bbox}
Dany jest $R$-moduł $M$. Gdy $M=\bigoplus_i M_i$, gdzie $M_i\subseteq M$ jest małymi podmodułami o zrozumiałej strukturze, to struktura $M$ też jest zrozumiała.
\end{bbox}

\begin{definition}
Mówimy, że $R$-moduł $M$ jest \important{prosty}, gdy $M\neq 0$ i dla każdego $N\subseteq M$ podmodułu, $N=0$.
\end{definition}

Pierścień enodmorfizmów $R$-modułu $M$ definiujemy jako
$$End_R(M)=\{h:M\to M\;:\;h\text{ - homomorfizm modułów}\}.$$
Jest to podpierścień pierścienia $End(M, +)$, który traktuje $M$ jako grupę względem dodawania.

\begin{lemma}[lemat Schura] Lemat Schura: jeśli $M$ jest $R$-modułem prostym, to $End_R(M)$ jest pierścieniem z dzieleniem (prawie ciało, poza tym, że nie musi być przemienny).
\end{lemma}
\begin{proof}
Niech $0\neq f\in End_R(M)$. Wtedy $Im(f)=M$, bo jest to niezerowy podmoduł $M$, a $M$ przecież było modułem prostym. Stąd właśnie $Im$ jest całością. $ker(f)=\{0\}$, czyli $f$ jest $1-1$ i "na".
\end{proof}

Załóżmy, że $M$ jest $R$-modułem oraz $K=End_R(M)$ jest pierścieniem z dzieleniem ("ciało nieprzemienne"). Uwaga! nie zakładamy prostości $M$ (ale możliwe że to wyniknie z $K$-pierścień z dzieleniem). Wtedy o $M$ możemy myśleć jako o $K$-module. Załóżmy, że $n=\dim_K(M)<\infty$. Wtedy $End_K(M)\cong M_{n\times n}(K)$.

Wybierzmy $r\in R$ i niech $\phi_r:M\to M$ takie, że $\phi_r(m)=r\cdot m$. Wtedy $\phi_r\in End_K(M)$ (? gdy $R$-przemienny ? - zadanie)

\begin{center}\begin{tikzcd}
r\arrow[r, mapsto] & m(\phi_r)\in M_{n\times n}(K)\\
R\arrow[u, phantom, sloped, "\in"]\arrow[r, "\text{homomorfizm pierścieni z }1"] & M_{n\times n}(K)
\end{tikzcd}\end{center}

Powyższe jest rozwinięte jako teoria reprezentacji pierścieni

\setcounter{section}{11}


\begin{bbox}
Niech $R$ będzie pierścieniem z $1\neq 0$ i $M$ będzie $R$-modułem.

\begin{itemize}%[leftmargin=*]
    \item[\PHtunny] Układ $\{m_i\}\subseteq M$ jest \important{liniowo niezależny}, gdy
    $$(\forall\;\{r_i\}\subseteq R)\;\sum r_im_i=0\implies(\forall\;i)\;r_i=0$$
    \item[\PHtunny] Liniowa zależność jest zaprzeczeniem
    \item[\PHtunny] $S\subseteq M$ jest liniowo niezależny, gdy układ $\{m_i\}=S$ (bez powtórzeń)
    \item[\PHtunny] $B\subseteq M$ jest bazą, gdy:
    \begin{itemize}
        \item jest liniowo niezależny
        \item generuje $M$ jako $R$-moduł
        \item $Lin_R(B)=M$.
    \end{itemize}
\end{itemize}

\end{bbox}

\textbf{Przykład:}

\begin{enumerate}
    \item $\{0\}\subseteq M$ jest liniowo niezależny, natomiast układ $(m_0,m_0)$ jest liniowo zależny, bo $1\cdot m_0+(-1)\cdot m_0=0$.
    \item $\Q$ jako $\Z$-moduł $(a, b)$ jest liniowo zależny dla wszystkich $a,b\in\Q$.

    Bez straty ogólności $a,b\neq 0$ i $a\neq b$. $a=\frac{m}{n},b=\frac{p}{q}$, czyli
    $$(np)\cdot a-(qm)\cdot b=pm-mp=0$$

    W takim razie, $\Q$ nie ma bazy jako $\Z$-moduł.
\end{enumerate}

\setcounter{theorem}{0}
\subsection{Suma prosta modułów}

\begin{bbox}
\important{(Abstrakcyjna) suma prosta} rodziny modułów (koprodukt) to
$$\bigsqcup M_i= \bigoplus M_i=\{f\in\bigsqcap M_i\;:\;\{i\in I\;:\;f(i)\neq 0\}\text{ jest skończony}\}$$
\end{bbox}

Innymi słowy, elementy sumy prostej to krotki $(m_1,...,m_n,...)$ takie, że tylko dla skończenie wielu $i$ mamy $m_i\neq 0$. Dla każdego $j$ istnieje naturalne włożenie $f_j:M_j\to \bigsqcup M_i$ zdefiniowane przez $f_j(m)=(0,...,0,m,0,...)$, gdzie $m$ występuje na $j$-tej pozycji.

Najprostszy przypadek sumy prostej to suma dwóch modułów: $M\oplus N$. Działania w tym module definiujemy przez:
$$\begin{array}{l ll l}
  (m_1\oplus n_1)+(m_2\oplus n_2)=(m_1+m_2)\oplus(n_1+n_2) & & & m_i\in M,\;n_i\in N\\
  r(m\oplus n)=(rm)\oplus (rn) & & & r\in R,\; m\in M,\; n\in N.
\end{array}
$$
Przyjęło się uznawać za naturalne przekształcenie $h:\bigoplus M_i\to M$ zadane przez 
$$h(m_1,...,m_n,...)=\sum m_i\in M.$$ 
Stąd elementu $\bigoplus M_i$ czasem oznacza się przez $\sum m_i$.

\begin{remark}\label{uwaga:11.1}
Jeśli dla każdego $i\in I$ istnieje $M_i\to M$ to istnieje dokładnie jeden $h:\bigsqcup M_i\to M$ taki, że dla każdego $i_0$

\begin{center}\begin{tikzcd}
M_{i_0}\arrow[r, "g_{i_0}"]\arrow[d, "f_{i_0}"] & M\\
\bigsqcup M_i\arrow[ur, "\exists!\;h" right, dashed]
\end{tikzcd}\end{center}

Jest to nazywane własnością uniwersalności.
\end{remark}

\begin{proof}
  Ćwiczenia
\end{proof}

\begin{remark}
$M=M_1\oplus M_2$ dla podmodułów $M_1,M_2\subseteq M$. Wtedy dla 
$$g_i=id_{M_i}:M_i\to M$$ 
oraz $h$ jak z uwagi \ref{uwaga:11.1}
$$h:M_1\sqcup M_2\to M$$
jest izomorfizm modułów.
\end{remark}
\begin{proof}
Ćwiczenie, łatwy.
\end{proof}

\subsection{Baza modułu}

\begin{definition}
  $M$ jest \important{wolnym $R$-modułem}, gdy $M$ ma bazę.
\end{definition}

\textbf{Przykłady}:

\begin{enumerate}
    \item $R$ jest wolnym $R$-modułem z bazą $\{1\}$. 
    \item $\Q$ nie jest wolnym $\Z$-modułem
    \item $\{M_i\}$ są rodziną wolnych $R$-modułów, wtedy $\bigsqcup M_i$ jest wolnym $R$-modułem.

      \begin{proof}
        Niech $B_i\subseteq M_i$ będą bazami. Wtedy 
        $$f_{i_0}:M_{i_0}\isomorphism f_{i_0}[M_{i_0}]\subseteq\bigsqcup M_i$$
        $$\bigcup f_i[B_i]$$
        jest bazą $\bigsqcup M_i$.
      \end{proof}
\end{enumerate}

\begin{remark}\label{uwaga:11.4}
  Niech $R$ będzie pierścieniem z jednością, a $M$ $R$-modułem. Niech $A=\{a_i\;:\;i\in i\}\subseteq M$ będzie podzbiorem bez powtórzeń. Następujące warunki są równoważne:
  \begin{enumerate}
    \item $A$ jest bazą
    \item dla każdego $m\in M$ istnieją jedyne $r_i\in R$ takie, że $m=\sum r_ia_i$ i jest ich skończenie wiele
    \item dla każdego $N$ $R$-modułu dla każdej funkcji $g:A\to N$ istnieje jedyna funkcja $g':M\to N$ indukowana przez $g$.
  \end{enumerate}
\end{remark}
\begin{proof}
  $(1)\iff(2)$ jak w algebrze liniowej.

  $(2)\implies(3)$

  Weźmy dowolny $m\in M$, wtedy
  $$g'(m)=\sum r_ig(a_i)$$
  jest jedyną dobrą definicją.

  $(3)\implies(1)$
  \begin{itemize}
    \item $A$ generuje $M$:

      Niech $M'=\langle A\rangle\subseteq M$. Rozważmy 

      \begin{center}\begin{tikzcd}
        M\arrow[r, "j"] & M/M'\\
        M\arrow[ur, "0"]
      \end{tikzcd}\end{center}

      $g=j\restriction A=0\restriction A=0$, więc na mocy $(3)$
      \begin{center}\begin{tikzcd}
        A\arrow[r, "g=0"]\arrow[d, phantom, sloped, "\subseteq"] & M/M'\\
        M\arrow[ur, "\exists!g'" right]
      \end{tikzcd}\end{center}
    \item $A$ jest liniowo niezależne:

      Załóżmy, że istnieje $\sum r_{i_k}a_{i_k}=0$, $r_{i_k}\neq 0$. Niech $g:A\to R$ takie, że
      $$g(a_0)=\begin{cases}0&i\neq i_0\\1&i=i_0\end{cases}.$$
      Na mocy $(3)$ wiemy, że istnieje dokładnie jedno $g':M\to R$ takie, że
      $$0=g'(0)=g'(\sum r_ia_i)=\sum r_ig(a_i)=r_{i_0}\cdot 1=r_{i_0}\neq 0$$
      co daje sprzeczność.
  \end{itemize}
\end{proof}

\begin{remark}$ $\newline
  \begin{enumerate}
    \item Jeśli $A=\{a_i\}_{i\in I}$ jest bazą $M$ to wtedy
      \begin{enumerate}
        \item $Ra_i$ jest  podmodułem $M$
        \item $M=\oplus Ra_i$
      \end{enumerate}
    \item Jeśli $A$ jest dowolnym zbiorem, to istnieje $R$-moduł $M$ o bazie $A$. Wtedy
        $$M=\sqcup_{a\in A} R_a$$
        i wtedy $R_a\cong R$
  \end{enumerate}
\end{remark}
\textbf{Przykład:} $\Z$ jest modułem wolnym (wolna grupa abelowa).

\begin{theorem}
  Załóżmy, że $R$ jest przemienny. Wtedy każde dwie bazy $R$-modułu $M$ są równoliczne.
\end{theorem}
\begin{proof}
  Problem redukujemy do algebry liniowej. Niech $I\triangleleft R$ będzie maksymalnym ideałem i niech $M'=IM\subseteq M$ będzie podmodułem generowanym przez
  $$\{im\;:\;i\in I,m\in M\}.$$
  Wtedy, jeśli popatrzymy na $M/M'$, to ma on naturalną strukturę modułu nad $R/I$. Dla $(m+M')$ i $(r+I)$ definiujemy
  $$(r+I)(m+M')=(rm+M')$$
  oraz dodawanie jak w grupie ilorazowej.

  Niech $B_1,B_2\subseteq M$ będą bazami $M$. Ustalmy ilorazowe homomorfizmy
  $$j:M\to M/M'$$
  $$l:R\to R/I.$$
  Chcemy pokazać, że $j[B_1],j[B_2]$ są bazami $M/M'$ jako $R/I$-modułu.
  \begin{itemize}
    \item generowanie:
      
      $$M\ni m=\sum r_ib_i\implies j(m)=\sum j(r_ib_i)=\sum [r_ib_i+M']=\sum (r_i+I)(m_i+M')=\sum l(r_i)j(b_i)$$
    \item liniowa niezależność:

      Naszym celem jest pokazać, że jeśli 
      $$\sum l(r_i)j(b_i)=0\implies l(r_i)=0$$
      to wtedy
      $$j(\sum r_ib_i)=0.$$
      Wiemy, że $\sum r_ib_i\in IM=M'$. Dalej:
      $$\sum r_ib_i=\sum r'_jm_j'$$
      dla $r_j'\in I$ oraz $m_j'\in M$. Niech więc $m_j'=\sum s_{ij}b_i$ dla $s_{ij}\in R$ oraz $b_i\in B_1$. Wtedy
      $$\sum r_j'm_j'=\sum_{i,j} r_j's_{ij}b_i=\sum_i\left[\sum_j r_j's_{ij}\right]b_i=\sum_ir_ib_i$$
      Sokoro dla każdego $i$ mamy $r_i=\sum_jr_j's_{ij}\in I$, to dla każdego $i$ $l(r_i)=0$ w $R/I$. Więc $j[B_1]$ jest liniowo niezależny w $M/M'$ jako układ. Ponieważ możemy ustalić
      $$j:B_1\bijection j[B_1]$$
      to $B_1\sim j[B_1]$ oraz $B_2\sum j[B_2]$. Ale $R/I$ jest ciałem, więc $M/M'$ jest przestrzenią liniowa nad $R/I$, więc ponieważ $j[B_i]$ są bazami tej przestrzeni liniowej, to
      $$j[B_1]\sim j[B_2]$$
      $$B_1\sim B_2$$
  \end{itemize}
\end{proof}

\begin{remark}
  Każdy $R$-moduł $M$ jest homomorficznym obrazem $R$-modułu wolnego.
\end{remark}
\begin{proof}
  Taki sam jak dla:
  \begin{itemize}
    \item grupy wolnej
    \item wolnej grupy abelowej
    \item algebry wolnej w rozmaitości algebraicznej
  \end{itemize}

  Niech $N=\bigsqcup_{m\in M}Rm$ będzie $R$-modułem wolnym o bazie $M$. Równie dobrze możemy wziąć $N=\bigsqcup_{a\in A} Ra$, gdzie $A$ generuje $M$.

  \begin{center}
    \begin{tikzcd}[row sep=tiny]
      id\;:\;M\arrow[dr, "na"]\arrow[dd, phantom, sloped, "\subseteq"]\\
      & M\\
      (\exists!\;f)\;:\;N\arrow[ur, "R-liniowe" below right]
    \end{tikzcd}
  \end{center}

  Z uwagi \ref{uwaga:11.4}(3) $f$ istnieje i jest epimorfizmem.

  %{\large\color{orange}SOME MORE THINKING}
\end{proof}

\begin{fact}
  Załóżmy, że $M,N$ są $R$-modułami, $N$ jest wolny i $f:M\to N$ jest epimorfizmem. Wtedy $M\cong ker(f)\oplus N$. Więcej: istnieje $N'\cong N$ taki, że $M=ker(f)\oplus N'$.
\end{fact}
\begin{proof}
  Niech $B\subseteq N$ będzie bazą modułu $N$.

  \begin{illustration}
    \draw (0, 0) rectangle (4, 3);
    \draw (1.5, 0) rectangle (2, 3);
    \draw (0, -2) rectangle (4, -3);
    \node at (4.3, -2.5) {$N$};
    \node at (4.3, 1.5) {$M$};
    \node at (1.7, 3.5) {$ker(f)$};
    \filldraw (1, 2) circle (2pt) node [above]{$b'$};
    \draw[->](0.9, 1.8)..controls (0.5, 1) and (0.5, -1.5).. (0.9, -2.2);
    \draw[<-](1.1, 1.8)..controls (1.5, 1) and (1.5, -1.5).. (1.1, -2.2);
    \filldraw (1, -2.5) circle (2pt) node [below] {$b$};

    \draw[->>] (1.7, -0.3)--(1.7, -2.3) node [midway, right] {$f$};
    \filldraw (1.7, -2.4) circle (2pt) node [below] {0};
    \draw [->] (3, -1.8)..controls (3.5, -1.6)and(4, -1.3)..(3.5, -0.5) node [midway, right] {$g'$};
  \end{illustration}

  Dla $b\in B$ ustalamy $b'\in M$ takie, że $f(b')=b$. Niech $g:B\to M$ takie, że $g(b)=b'$. Z uwagi \ref{uwaga:11.4}(3) wiemy, że istnieje jedyne $g':N\to M$ $R$-liniowe takie, że $g'$ rozszerza $g$.

  Wtedy $f\circ g':N\to N$ i $(f\circ g')\restriction B=id_B$, czyli z uwagi \ref{uwaga:11.4} $f\circ g'=id_N$. Stąd $g'$ jest $1-1$. Czyli $N\cong g'[N]\subseteq M$.

  Pokażemy teraz, że $M=ker(f)\oplus g'[N]$. Weźmy dowolny $m\in M$. Wtedy
  $$m=\underbrace{(m-(g'f)(m))}_{ker(f)}+\underbrace{(g'f)(m)}_{g'[N]}$$
  bo 
  $$f(m-(g'f)(m))=f(m)-(fg')f(m)-f(m)=0.$$
  Pozostaje nam pokazać, że $ker(f)\cap g'[N]=0$. Niech $m\in ker(f)\cap g'[N]$. Wtedy $m=g'(n)$. Ale wtedy $0=f(m)=(fg')(n)=n$. Wobec tego $n=0$, więc $m=g'(n)=g'(0)=0$.

  %{\large\color{orange}COŚ TUTAJ CHYBA JEST ŹLE}
\end{proof}

\subsection{Moduły projektywne, cykliczne, torsyjne}

\begin{definition}$ $

  \begin{itemize}
    \item[\PHtunny] $R$-moduł $N$ jest \important{projektywny}, jeśli dla każdego $M$ i każdego epimorfizmu $f:M\to N$ mamy $M=ker(f)\oplus M'$ dla pewnych podmodułów $M'\subseteq M$. 

      Jest to równoważne [ćwiczenia] istnieniu $g:N\to M$ takiego, że $f\circ g=id_N$.

      \begin{center}\begin{tikzcd}
        & M\arrow[d, "\forall\; f", twoheadrightarrow]\\
        N\arrow[ur, "\exists\;g"]\arrow[r, "id"] & N
      \end{tikzcd}\end{center}

      to znaczy, że $f$ rozszczepia się.
    \item[\PHtunny] $R$-moduł $M$ jest \important{injektywny} wtedy, gdy dla każdego $N$ i każdego monomorfizmu $g:M\hookrightarrow N$ istnieje $N'\subseteq N$ taki, że $N=Im(g)\oplus N'$. To znaczy, obraz $g$ jest \acc[i]{składnikiem prostym} $N$.
  \end{itemize}
\end{definition}

\textbf{Przykłady:} 
\begin{enumerate}
  \item Moduł wolny jest projektywny
  \item W przypadku, gdy $R$ jest ciałem, to każdy $R$-modul jest projektywny i injektywny.
\end{enumerate}

\begin{definition}[moduł cykliczny]
  Załóżmy, że $R$ jest pierścieniem przemiennym z jednością. Mówimy, że $M$ jest \important{$R$-modułem cyklicznym}, gdy jest generowany przez pojedynczy element. To znaczy, że istnieje $a\in M$ takie, że
  $$M=Ra.$$
\end{definition}

\textbf{Przykłady:}
\begin{enumerate}
  \item $R=R1$ jest modułem cyklicznym
  \item $M$ jest $R$-modułem. i $a\in M$, to wtedy $Ra\subseteq M$ jest podmodułem cyklicznym.
\end{enumerate}

\begin{remark}[cykliczny $\iff M\cong R/I$]
  $M$ jest modułem cyklicznym $\iff$ $M\cong R/I$ jako $R$-moduły dla pewnego $I\triangleright R$.
\end{remark}
\begin{proof}
  $\impliedby$ $R/I$ jest generowany przez $1+I$ i to jest koniec.

  $\implies$

  $M=aR$, wtedy $f:R\to M$, $r\mapsto ra$, jest epimorfizmem $R$-modułów. Czyli jeśli $I=ker(f)$, to $R/I\cong M$.
\end{proof}

\begin{definition}[torsje, moduł torsyjny]$ $

  \begin{itemize}
    \item[\PHtunny] Dla $a\in M$ $I_a=\{r\in R\;:\;ra=0\}\triangleright R$ jest \important{torsją} elementu $a$.
    \item[\PHtunny] $a$ jest \important{torsyjny}, gdy $I_a\neq 0$. W przeciwnym przypadku mówimy, że $a$ jest \acc[i]{beztorsyjny}.
    \item[\PHtunny] Mówimy, że $M$ jest \important{modułem torsyjnym}, gdy każdy jego element jest torsyjny. $M$ jest \acc[b]{beztorsyjny}, gdy każdy niezerowy element jest beztorsyjny.
    \item[\PHtunny] $M_t=\{a\in M\;:\;a\text{ jest torsyjny}\}$ nazywamy \important{częścią torsyjną} modułu $M$
  \end{itemize}
\end{definition}

\begin{remark}$ $

  \begin{enumerate}
    \item $M_t$ jest podmodułem $M$
    \item $M/M_t$ jest beztorsyjny.
  \end{enumerate}
\end{remark}
\begin{proof}$ $

  \begin{enumerate}
    \item ćwiczenie
    \item Załóżmy, że $m+M_t$ jest torsyjny. Czyli $r(m+M_t)=0+M_t$ dla pewnego $r\neq 0$. Ale to oznacza, że $rm\in M_t$. To znaczy, że $r'(rm)=0$ dla pewnego $r'\neq 0$. Ale wtedy $(r'r)m=0$ i $r'r\neq 0$, bo $R$ jest dziedziną. Czyli $m$ jest torsyjny i $m\in M_t$. W takim razie $m+M_t=0$ 
  \end{enumerate}
\end{proof}

\textbf{Przykłady:} grupy abelowe torsyjne/beztorsyjne (jako $\Z$-moduły)

\subsection{Moduły skończenie generowane}

\begin{theorem}\label{twierdzenie:11.14}
  $R$ jest pierścieniem przemiennym z $1\neq 0$. Niech $M,N$ będą $R$-modułami oraz $f:M\to N$ jest epimorfizmem. Niech $M'=ker(f)$, $N\cong M/M'$.

  \begin{enumerate}
    \item $N,M'$ są skończenie generowane, to $M$ też jest skończenie generowane
    \item $M$ jest skończenie generowany, to wtedy $N$ też taki jest
  \end{enumerate}
\end{theorem}
\begin{proof}$ $\newline
  \begin{enumerate}
    \item Niech $\{n_1,...,n_k\}\subseteq N$ i $\{m_1,...,m_l\}\subseteq M'$ będą zbiorami generatorów. Weźmy $n_1',...,n_k'\in M$ takie, że $f(n_i')=n_i$.
    
      \begin{illustration}
        \draw[thick](0, 0)rectangle(5, 3) node[above right]{$M$};
        \draw(2, 0)rectangle(3, 3) node[above]{$M'=ker(f)$};
        \draw(0, -1.4)rectangle(5, -0.5) node[below right]{$N$};
        \filldraw(0.3, 1.5)circle(2pt) node [below] {$n_1'$};
        \filldraw(0.8, 1.5)circle(2pt) node [below] {$n_2'$};
        \filldraw(1.3, 1.5)circle(2pt) node [below] {$n_3'$};
        \filldraw(3.7, 1.5)circle(2pt);
        \filldraw(4.2, 1.5)circle(2pt);
        \filldraw(4.7, 1.5)circle(2pt) node [below] {$n_k'$};
        \filldraw(2.5, 2.8)circle(2pt)node[below right] {$m_k$};
        \filldraw(2.5, 2.3)circle(2pt);
        \filldraw(2.5, 1.9)circle(2pt);
        \filldraw(2.5, 1.4)circle(2pt) node [below right] {$m_3$};
        \filldraw(2.5, 0.9)circle(2pt) node [below right] {$m_2$};
        \filldraw(2.5, 0.4)circle(2pt) node [below right] {$m_1$};
        \filldraw(0.3, -0.8)circle(2pt) node[below] {$n_1$};
        \filldraw(0.8, -0.8)circle(2pt) node[below] {$n_2$};
        \filldraw(1.3, -0.8)circle(2pt);
        \filldraw(1.65, -0.8)circle(2pt);
        \filldraw(2, -0.8)circle(2pt);
        \filldraw(2.5, -0.8)circle(2pt)node[below]{$0$};
        \filldraw(2.85, -0.8)circle(2pt);
        \filldraw(3.2, -0.8)circle(2pt);
        \filldraw(3.7, -0.8)circle(2pt);
        \filldraw(4.2, -0.8)circle(2pt);
        \filldraw(4.7, -0.8)circle(2pt)node[below]{$n_k$};
      \end{illustration}

    W takim razie, $\{n_1',...,n_k',m_1,...,m_l\}$ generują $M$, bo dla dowolnego $x\in M$ mamy $f(x)\in N$, więc $f(x)=\sum r_in_i$ dla $f_i\in R$. Niech więc $M\ni x'=\sum r_in_i'$. Wtedy $f(x')=\sum r_in_i$, czyli $f(x-x')=0$ i mamy $x-x'\in M'=ker(f)$. Więc $M'\ni x-x'$, z czego dostajemy $x-x'=\sum r_j'm_j$ dla $r_j'\in R$ i $x=x'+(x-x')=\sum r_in_i'+\sum r_j'm_j$.

    \item Ćwiczenie, łatwe. $A\subseteq M\implies f[A]$ generuje $N$, gdzie $A$ jest zbiorem generatorów $M$.
  \end{enumerate}
\end{proof}

\begin{conclusion} Załóżmy, że $R$ jest pierścieniem przemiennym. Wtedy następujące warunki są równoważne:

  \begin{enumerate}
    \item $R$ jest pierścieniem noetherowskim
    \item Jeśli $M$ jest skończenie generowanym $R$-modułem i $N\subseteq M$ jest jego podmodułem, to $N$ też jest skończenie generowany. 
  \end{enumerate}
\end{conclusion}

\begin{proof}$ $\newline
  \begin{itemize}[leftmargin=19mm]
    \item[(2)$\implies$(1)] Niech $I\triangleleft R$. Zauważmy, że $R=R\cdot 1$ jest skończenie generowanym $R$-modułem cyklicznym. Z tego względu, $I\subseteq R$ również jest skończenie generowanym $R$-modułem. W takim razie, każdy ideał $I\triangleleft R$ jest skończenie generowany i $R$ jest pierścieniem noetherowskim.
    \item[(1)$\implies$(2)] Weźmy $R$-moduł $M$ generowany przez $\{m_1,...,m_l\}$. Niech $W=Rm_1\oplus ...\oplus Rm_l$ będzie $R$-modułem wolnym o bazie $\{m_1,...,m_l\}$.

      Rozważmy epimorfizm $\phi:W\to M$ zadany przez $\phi(m_i)=m_i$ oraz podmoduł $N\subseteq M$:

      \begin{center}
        \begin{tikzcd}
          W\arrow[r, "\phi", twoheadrightarrow] & M\\
          N'=\phi^{-1}[N]\arrow[u, phantom, sloped, "\subseteq"] & N\arrow[u, sloped, phantom, "\subseteq"]
        \end{tikzcd}
      \end{center}

      Wystarczy pokazać, że $N'$ jest skończenie generowanym podmodułem $W$ (bo baza $N$ będzie $\leq $ niż baza $N'$ przez fakt, że $\phi$ jest surjekcją).

      Indukcja względem ilości elementów bazy $M$:

      \begin{itemize}
        \item[$l=1$] Wtedy $W\cong R$. Niech $\psi:W\isomorphism R$ oraz $N''=\psi[N']$ będzie podmoudłem $R$. Podmoduły pierścienia to jego ideały. Z noetherowskości $R$ mamy, że $N''=\psi[N']$ jest skończenie generowanym ideałem. W takim razie $N'$ również jest skończenie generowany, gdyż $\psi$ było izomorfizmem.
        \item[$l>1$] Załóżmy, że teza zachodzi dla wszystkich $l'<l$. Niech $\pi:W\to R$ będzie rzutem na $l$-tą współrzędną (czyli ostatnią).

          \begin{center}
            \begin{tikzcd}[column sep=large]
              W\arrow[r, "\pi"] & R\\
              N'\arrow[u, sloped, phantom, "\subseteq"]\arrow[r, "\phi_{\restriction N'}"] & \pi[N']\arrow[u, sloped, phantom, "\subseteq"]
            \end{tikzcd}
          \end{center}

          $\pi[N']$ jest podmodułem pierścienia $R$, więc działa jak ideał. Ideały w pierścieniu noetherowskim są skończenie generowane, czyli $\pi[N']$ jest skończenie generowany.

          Sprawdźmy teraz $ker(\phi_{\restriction N'})\subseteq \underbrace{R\times ...\times R}_{l-1}\times\{0\}\cong \underbrace{R\times...\times R}_{l-1}$ jest podmodułem modułu o bazie z $(l-1)$ elementami, czyli na mocy założenia indukcyjnego $ker(\phi_{\restriction N'})$ jest skończenie generowane. Na mocy twierdzenia \ref{twierdzenie:11.14}(1) $N'$ jest więc skończenie generowany ($\pi_{\restriction N'}:N'\to .\pi[N']$ jest homomorfizmem, $ker(\pi_{\restriction N'})$ jest skończenie generowany i $\pi[N']\cong N'/ ker(\pi_{\restriction N'})$ również jest skończenie generowany).
      \end{itemize}
  \end{itemize}
\end{proof}

